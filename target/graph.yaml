---
  swagger: "2.0"
  info: 
    title: "Knowledge Graph"
    description: "All APIs of the Knowledge Graph webservices"
    version: "1.0.0"
  schemes: 
    - "https"
  basePath: "/"
  produces: 
    - "application/json"
  consumes: 
    - "application/json"
  paths: 
    /vertex: 
      post: 
        summary: "Create a new vertex"
        description: "This creates a new vertex.\n"
        parameters: 
          - 
            name: "data"
            in: "body"
            description: "The json representation of the vertex"
            required: true
            schema: 
              $ref: "#/definitions/Vertex"
        responses: 
          200: 
            description: "Returns the created vertex."
            schema: 
              $ref: "#/definitions/Vertex"
          default: 
            description: "Unexpected error"
            schema: 
              $ref: "#/definitions/Error"
    /vertex/{vertex-uuid}: 
      parameters: 
        - 
          name: "vertex-uuid"
          in: "path"
          description: "the uuid representing the vertex"
          type: "string"
          required: true
      get: 
        summary: "Return the given vertex"
        description: "Return the given vertex"
        responses: 
          200: 
            description: "Returns the given vertex."
            schema: 
              $ref: "#/definitions/Vertex"
          default: 
            description: "Unexpected error"
            schema: 
              $ref: "#/definitions/Error"
      put: 
        summary: "update the given vertex."
        description: "Update/Add properties for the given vertex."
        parameters: 
          - 
            name: "data"
            in: "body"
            description: "the new values for the vertex"
            required: true
            schema: 
              $ref: "#/definitions/Vertex"
        responses: 
          200: 
            description: "Returns the modified vertex."
            schema: 
              $ref: "#/definitions/Vertex"
          default: 
            description: "Unexpected error"
            schema: 
              $ref: "#/definitions/Error"
      delete: 
        summary: "delete the given vertex"
        description: "Delete the vertex"
        responses: 
          200: 
            description: "Returns the given vertex."
            schema: 
              $ref: "#/definitions/Vertex"
          default: 
            description: "Unexpected error"
            schema: 
              $ref: "#/definitions/Error"
    /edge: 
      post: 
        summary: "Create a new edge"
        description: "This creates a new edge.\n"
        parameters: 
          - 
            name: "data"
            in: "body"
            description: "The json representation of the edge"
            required: true
            schema: 
              $ref: "#/definitions/Edge"
        responses: 
          200: 
            description: "Returns the created edge."
            schema: 
              $ref: "#/definitions/Edge"
          default: 
            description: "Unexpected error"
            schema: 
              $ref: "#/definitions/Error"
    /edge/{edge-uuid}: 
      parameters: 
        - 
          name: "edge-uuid"
          in: "path"
          description: "the uuid representing the edge"
          type: "string"
          required: true
      get: 
        summary: "Return the given edge"
        description: "Return the given edge"
        responses: 
          200: 
            description: "Returns the given edge."
            schema: 
              $ref: "#/definitions/Edge"
          default: 
            description: "Unexpected error"
            schema: 
              $ref: "#/definitions/Error"
      put: 
        summary: "update the given edge."
        description: "Update/Add properties for the given edge."
        parameters: 
          - 
            name: "data"
            in: "body"
            description: "the new values for the edge"
            required: true
            schema: 
              $ref: "#/definitions/Edge"
        responses: 
          200: 
            description: "Returns the modified edge."
            schema: 
              $ref: "#/definitions/Edge"
          default: 
            description: "Unexpected error"
            schema: 
              $ref: "#/definitions/Error"
      delete: 
        summary: "delete the given edge"
        description: "Delete the edge"
        responses: 
          200: 
            description: "Returns the given edge."
            schema: 
              $ref: "#/definitions/Edge"
          default: 
            description: "Unexpected error"
            schema: 
              $ref: "#/definitions/Error"
  definitions: 
    Vertex: 
      title: "Vertex"
      allOf: 
        - 
          $ref: "#/definitions/Typed"
        - 
          type: "object"
          properties: 
            properties: 
              type: "array"
              items: 
                $ref: "#/definitions/MultiPropertyValue"
    Edge: 
      type: "object"
      properties: 
        in_id: 
          type: "string"
          description: "uuid of the input Vertex."
        out_id: 
          type: "string"
          description: "uuid of the output Vertex."
        name: 
          type: "string"
          description: "The name of the Edge."
        prop: 
          type: "array"
          items: 
            $ref: "#/definitions/Property"
    MultiPropertyValue: 
      type: "object"
      title: "MultiPropertyValue"
      properties: 
        key: 
          $ref: "#/definitions/Key"
        data_type: 
          $ref: "#/definitions/DataType"
        cardinality: 
          $ref: "#/definitions/Cardinality"
        values: 
          type: "array"
          items: 
            $ref: "#/definitions/VertexProperty"
      required: 
        - "key"
        - "data_type"
        - "cardinality"
        - "values"
    VertexProperty: 
      title: "VertexProperty"
      allOf: 
        - 
          $ref: "#/definitions/DataValue"
        - 
          type: "object"
          properties: 
            key: 
              $ref: "#/definitions/Key"
            properties: 
              type: "array"
              items: 
                $ref: "#/definitions/Property"
    Property: 
      title: "Property"
      allOf: 
        - 
          $ref: "#/definitions/DataValue"
        - 
          type: "object"
          properties: 
            key: 
              $ref: "#/definitions/Key"
      required: 
        - "key"
        - "data_type"
        - "value"
    Typed: 
      type: "object"
      properties: 
        types: 
          type: "array"
          items: 
            $ref: "#/definitions/Key"
    Key: 
      type: "string"
      title: "Key"
      description: "property key, pattern: <namspace>:<name>"
      minLength: 2
    DataValue: 
      type: "object"
      title: "DataValue"
      properties: 
        data_type: 
          $ref: "#/definitions/DataType"
        value: 
          anyOf: 
            - 
              type: "string"
            - 
              type: "number"
            - 
              type: "boolean"
      required: 
        - "value"
    DataType: 
      type: "string"
      title: "DataType"
      enum: 
        - "string"
        - "character"
        - "boolean"
        - "byte"
        - "short"
        - "integer"
        - "long"
        - "float"
        - "double"
        - "uuid"
    Cardinality: 
      type: "string"
      title: "Cardinality"
      enum: 
        - "single"
        - "set"
        - "list"
    Error: 
      type: "object"
      properties: 
        code: 
          type: "integer"
          format: "int32"
        message: 
          type: "string"
        fields: 
          type: "string"
