{"swagger":"2.0","info":{"title":"Graph Mutation Service","description":"Mutate the graph","version":"1.0.0"},"host":"internal.datascience.ch","schemes":["https"],"basePath":"/api/mutation","produces":["application/json"],"consumes":["application/json"],"paths":{"/mutation":{"post":{"summary":"Mutate the graph","description":"This mutates the graph.\n","parameters":[{"name":"data","in":"body","description":"The json representation of the mutation","required":true,"schema":{"$ref":"#/definitions/Mutation"}}],"responses":{"200":{"description":"Returns the mutation request.","schema":{"$ref":"#/definitions/MutationResponse"}},"default":{"description":"Unexpected error","schema":{"$ref":"#/definitions/Error"}}}}},"/mutation/create_vertex":{"post":{"summary":"Create a vertex","description":"Equivalent to post a mutation consisting of one CreateVertex operation\n","parameters":[{"name":"data","in":"body","description":"The json representation of the mutation","required":true,"schema":{"$ref":"#/definitions/CreateVertex"}}],"responses":{"200":{"description":"Returns the mutation request.","schema":{"$ref":"#/definitions/MutationResponse"}},"default":{"description":"Unexpected error","schema":{"$ref":"#/definitions/Error"}}}}},"/mutation/{mutation-uuid}":{"parameters":[{"name":"mutation-uuid","in":"path","description":"the uuid representing the graph mutation","type":"string","required":true}],"get":{"summary":"Get mutation status","description":"Fetch the mutation status\n","responses":{"200":{"description":"Returns the mutation status.","schema":{"$ref":"#/definitions/MutationStatus"}},"default":{"description":"Unexpected error","schema":{"$ref":"#/definitions/Error"}}}}}},"definitions":{"Key":{"type":"string","title":"Key","description":"property key, pattern: \"namspace:name\"","minLength":2},"Vertex":{"title":"Vertex","allOf":[{"$ref":"#/definitions/Typed"},{"type":"object","properties":{"properties":{"type":"array","items":{"$ref":"#/definitions/MultiPropertyValue"}}}}]},"Edge":{"type":"object","properties":{"label":{"type":"string","description":"Edge label"},"from":{"type":"object","description":"Vertex reference"},"to":{"type":"object","description":"Vertex reference"},"properties":{"type":"array","items":{"$ref":"#/definitions/Property"}}},"required":["label","from","to"]},"VertexProperty":{"title":"VertexProperty","allOf":[{"type":"object","properties":{"key":{"$ref":"#/definitions/Key"},"properties":{"type":"array","items":{"$ref":"#/definitions/Property"}}}},{"$ref":"#/definitions/DataValue"}]},"Property":{"title":"Property","allOf":[{"type":"object","properties":{"key":{"$ref":"#/definitions/Key"}}},{"$ref":"#/definitions/DataValue"}],"required":["key","data_type","value"]},"Typed":{"type":"object","properties":{"types":{"type":"array","items":{"$ref":"#/definitions/Key"}}}},"MultiPropertyValue":{"type":"object","title":"MultiPropertyValue","properties":{"key":{"$ref":"#/definitions/Key"},"data_type":{"$ref":"#/definitions/DataType"},"cardinality":{"$ref":"#/definitions/Cardinality"},"values":{"type":"array","items":{"$ref":"#/definitions/VertexProperty"}}},"required":["key","data_type","cardinality","values"]},"DataValue":{"type":"object","title":"DataValue","properties":{"data_type":{"$ref":"#/definitions/DataType"},"value":{"type":["string","number","boolean"]}},"required":["value"]},"VertexReference":{"title":"VertexReference","discriminator":"type","properties":{"type":{"type":"string","enum":["persisted","new"]}},"required":["type"]},"PersistedVertexReference":{"title":"PersistedVertexReference","allOf":[{"$ref":"#/definitions/VertexReference"},{"properties":{"id":{"type":"string"}}}],"required":["type","id"]},"NewVertex":{"title":"NewVertex","allOf":[{"type":"object","properties":{"temp_id":{"type":"integer","format":"int32"}},"required":["temp_id"]},{"$ref":"#/definitions/Vertex"}]},"PersistedVertex":{"title":"PersistedVertex","allOf":[{"type":"object","properties":{"id":{"type":"string"}},"required":["id"]},{"$ref":"#/definitions/Typed"},{"type":"object","properties":{"properties":{"type":"array","items":{"$ref":"#/definitions/PersistedMultiPropertyValue"}}}}]},"PersistedEdge":{"type":"object","title":"PersistedEdge","properties":{"id":{"type":"string"},"label":{"type":"string","description":"Edge label"},"from":{"$ref":"#/definitions/PersistedVertexReference"},"to":{"$ref":"#/definitions/PersistedVertexReference"},"properties":{"type":"array","items":{"$ref":"#/definitions/Property"}}},"required":["id","label","from","to"]},"PersistedMultiPropertyValue":{"type":"object","title":"PersistedMultiPropertyValue","properties":{"key":{"$ref":"#/definitions/Key"},"data_type":{"$ref":"#/definitions/DataType"},"cardinality":{"$ref":"#/definitions/Cardinality"},"values":{"type":"array","items":{"$ref":"#/definitions/PersistedVertexProperty"}}},"required":["key","data_type","cardinality","values"]},"PersistedVertexProperty":{"title":"PersistedVertexProperty","allOf":[{"type":"object","properties":{"id":{"type":"string"},"parent":{"type":"string"}},"required":["id"]},{"$ref":"#/definitions/VertexProperty"}]},"DataType":{"type":"string","title":"DataType","enum":["string","character","boolean","byte","short","integer","long","float","double","uuid"]},"Cardinality":{"type":"string","title":"Cardinality","enum":["single","set","list"]},"Multiplicity":{"type":"string","title":"Multiplicity","enum":["multi","simple","one_to_many","many_to_one","one_to_one"]},"MgmtGraphDomain":{"type":"object","title":"GraphDomain","properties":{"id":{"type":"string","description":"uuid of the graph domain."},"namespace":{"type":"string","description":"The namespace of the graph domain."}},"required":["id","namespace"]},"MgmtGraphDomainRequest":{"type":"object","title":"GraphDomainRequest","properties":{"namespace":{"type":"string","description":"The namespace of the graph domain."}},"required":["namespace"]},"MgmtPropertyKey":{"type":"object","title":"PropertyKey","properties":{"id":{"type":"string","description":"uuid of the property key"},"graph_domain":{"$ref":"#/definitions/MgmtGraphDomain"},"name":{"type":"string","description":"name of the property key"},"data_type":{"$ref":"#/definitions/DataType"},"cardinality":{"$ref":"#/definitions/Cardinality"}},"required":["id","graph_domain","name","data_type","cardinality"]},"MgmtPropertyKeyRequest":{"type":"object","title":"PropertyKeyRequest","properties":{"namespace":{"type":"string","description":"namespace of the property key"},"name":{"type":"string","description":"name of the property key"},"data_type":{"$ref":"#/definitions/DataType"},"cardinality":{"$ref":"#/definitions/Cardinality"}},"required":["namespace","name","data_type","cardinality"]},"MgmtEdgeLabel":{"type":"object","title":"EdgeLabel","properties":{"id":{"type":"string","description":"uuid of the edge label"},"graph_domain":{"$ref":"#/definitions/MgmtGraphDomain"},"name":{"type":"string","description":"name of the edge label"},"multiplicity":{"$ref":"#/definitions/Multiplicity"}},"required":["id","graph_domain","name","multiplicity"]},"MgmtEdgeLabelRequest":{"type":"object","title":"EdgeLabel","properties":{"namespace":{"type":"string","description":"namespace of the property key"},"name":{"type":"string","description":"name of the edge label"},"multiplicity":{"$ref":"#/definitions/Multiplicity"}},"required":["namespace","name","multiplicity"]},"Mutation":{"type":"object","title":"Mutation","properties":{"operations":{"type":"array","items":{"$ref":"#/definitions/Operation"}}},"required":["operations"]},"MutationResponse":{"type":"object","title":"MutationResponse","properties":{"id":{"type":"string"}},"required":["id"]},"MutationStatus":{"type":"object","title":"MutationStatus","properties":{"id":{"type":"string"},"status":{"type":"string","enum":["pending","success","failed"]},"query":{"$ref":"#/definitions/Mutation"},"result":{"type":"object"}},"required":["id","status","query"]},"Operation":{"title":"Operation","discriminator":"type","properties":{"type":{"type":"string","enum":["create_vertex"]}},"required":["type"]},"CreateVertex":{"title":"CreateVertex","allOf":[{"$ref":"#/definitions/Operation"},{"properties":{"element":{"$ref":"#/definitions/NewVertex"}}}],"required":["type","element"]},"DeployRequest":{"type":"object","properties":{"id":{"type":"string","description":"The unique identifier of this deployment."},"docker_image":{"type":"string","description":"The docker image to pull and run."},"network_port":{"type":"integer","description":"If specified, the port of the docker to expose. A URL will be provided in the response, which map to this port."}}},"DeployResult":{"type":"object","properties":{"id":{"type":"string","description":"The unique identifier of this deployment."},"success":{"type":"boolean","description":"Indicate if the (un)deployment went well."},"url":{"type":"string","description":"An optional URL mapping to the port given in the request, if any."}}},"Error":{"type":"object","properties":{"code":{"type":"integer","format":"int32"},"message":{"type":"string"},"fields":{"type":"string"}}}}}